# Ralph Wiggum Docker Loop - Environment Configuration
# Copy this file to .env and configure your settings

# =============================================================================
# AUTH MODES (set in config.json per role, or via env vars)
# =============================================================================
#
# Anthropic (Claude Code):
#   anthropic-oauth  - Uses host ~/.claude OAuth credentials (RECOMMENDED)
#   anthropic-api    - Uses ANTHROPIC_API_KEY
#
# Gemini:
#   gemini-oauth     - Uses host ~/.gemini OAuth credentials
#   gemini-api       - Uses GEMINI_API_KEY
#
# OpenAI (Codex):
#   openai-oauth     - Uses host ~/.codex OAuth credentials
#   openai-api       - Uses OPENAI_API_KEY
#
# OpenCode:
#   opencode-oauth   - Uses host ~/.local/share/opencode credentials
#   opencode-api     - Uses API key
#
# GLM (z.ai proxy):
#   glm              - Uses GLM_AUTH_TOKEN via z.ai (DEFAULT)
#
# =============================================================================

# GLM Backend (z.ai API) - DEFAULT
GLM_AUTH_TOKEN=
GLM_BASE_URL=https://api.z.ai/api/anthropic
GLM_MODEL=glm-4.7

# Anthropic API (for anthropic-api mode)
# ANTHROPIC_API_KEY=sk-ant-...

# Gemini API (for gemini-api mode)
# GEMINI_API_KEY=...
GEMINI_MODEL=gemini-2.5-flash

# OpenAI API (for openai-api mode)
# OPENAI_API_KEY=sk-...

# OpenCode model (for opencode-oauth mode with Antigravity plugin)
# Available models via Antigravity:
#   google/antigravity-gemini-3-pro          - Gemini 3 Pro
#   google/antigravity-gemini-3-flash        - Gemini 3 Flash
#   google/antigravity-claude-sonnet-4-5     - Claude Sonnet 4.5
#   google/antigravity-claude-sonnet-4-5-thinking  - Claude Sonnet 4.5 with thinking
#   google/antigravity-claude-opus-4-5-thinking    - Claude Opus 4.5 with thinking
OPENCODE_MODEL=google/antigravity-claude-opus-4-5-thinking

# =============================================================================
# RALPH LOOP SETTINGS
# =============================================================================

# Maximum iterations (0 = unlimited)
RALPH_MAX_ITERATIONS=100

# =============================================================================
# MODEL SETTINGS
# =============================================================================

# Model override for Claude CLI (enables extended thinking for opus/sonnet 4.5+)
# Values: opus, sonnet, haiku, or full model name (e.g., claude-opus-4-5-20251101)
# RALPH_MODEL=opus

# =============================================================================
# OUTPUT FORMATTING
# =============================================================================

# Human-readable output (true) or raw JSON (false)
RALPH_READABLE_OUTPUT=true

# Show thinking blocks in output (true/false) - requires thinking-capable model
RALPH_SHOW_THINKING=true

# Disable colors (set to any value to disable - follows no-color.org standard)
# NO_COLOR=1

# =============================================================================
# 3-TIER REVIEW SYSTEM (set in config.json, listed here for reference)
# =============================================================================
#
# Builder settings (config.json: builder.*)
#   RALPH_BUILDER_BACKEND      - claude, gemini, codex, opencode
#   RALPH_BUILDER_AUTH_MODE    - auth mode for builder (default: glm)
#   RALPH_BUILDER_SESSION_MODE - fresh or resume (default: fresh)
#
# Reviewer settings (config.json: reviewer.*)
#   RALPH_REVIEWER_ENABLED     - true/false (default: false)
#   RALPH_REVIEWER_BACKEND     - claude, gemini, codex, opencode
#   RALPH_REVIEWER_AUTH_MODE   - auth mode for reviewer (default: anthropic-oauth)
#   RALPH_REVIEWER_MODEL       - specific model (optional)
#   RALPH_REVIEWER_SESSION_MODE - fresh or resume (default: fresh)
#
# Architect settings (config.json: architect.*)
#   RALPH_ARCHITECT_ENABLED    - true/false (default: false)
#   RALPH_ARCHITECT_BACKEND    - claude, gemini, codex, opencode
#   RALPH_ARCHITECT_AUTH_MODE  - auth mode for architect (default: gemini-oauth)
#   RALPH_ARCHITECT_MODEL      - specific model (optional)
#   RALPH_ARCHITECT_SESSION_MODE - fresh or resume (default: resume)
#
# Escalation settings (config.json: escalation.*)
#   RALPH_ESCALATION_ENABLED   - true/false (default: false)
#   RALPH_ESCALATION_MAX_FAILURES - failures before escalation (default: 3)
#
# =============================================================================

# =============================================================================
# CONTAINER SETTINGS
# =============================================================================

# Token limits for large file handling
CLAUDE_CODE_FILE_READ_MAX_OUTPUT_TOKENS=100000
MAX_MCP_OUTPUT_TOKENS=100000

# Disable telemetry
CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC=1
DO_NOT_TRACK=1

# =============================================================================
# OPTIONAL
# =============================================================================

# GitHub token for gh CLI
# GITHUB_TOKEN=

# Git user config for commits inside container
# GIT_USER_NAME=Ralph Loop
# GIT_USER_EMAIL=ralph@localhost

# =============================================================================
# EXAMPLE CONFIG.JSON for 3-tier with mixed auth modes
# =============================================================================
#
# {
#   "builder": {
#     "backend": "claude",
#     "auth_mode": "glm",
#     "session_mode": "fresh"
#   },
#   "reviewer": {
#     "enabled": true,
#     "backend": "claude",
#     "auth_mode": "anthropic-oauth",
#     "session_mode": "resume"
#   },
#   "architect": {
#     "enabled": true,
#     "backend": "claude",
#     "auth_mode": "anthropic-oauth",
#     "model": "claude-opus-4-5-20251101",
#     "session_mode": "resume"
#   },
#   "escalation": {
#     "enabled": true,
#     "max_builder_failures": 3
#   },
#   "max_iterations": 50
# }
#
# =============================================================================
